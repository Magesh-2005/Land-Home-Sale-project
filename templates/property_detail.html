{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-7">
    {% if property.image_filename %}
      <img class="img-fluid rounded mb-3" src="{{ url_for('uploaded_file', filename=property.image_filename) }}" alt="image">
    {% endif %}
    <h3>{{ property.title }}</h3>
    <p class="text-muted mb-1">{{ property.location }}</p>

    <p class="mb-2">
      {% if property.sale_or_rent == 'sale' %}
        <span class="badge bg-primary">For Sale</span>
        {% if property.price %}<strong> ‚Çπ{{ '%.0f'|format(property.price) }}</strong>{% endif %}
      {% else %}
        <span class="badge bg-info text-dark">For Rent</span>
        {% if property.rent %}<strong> ‚Çπ{{ '%.0f'|format(property.rent) }}/mo</strong>{% endif %}
      {% endif %}
      {% if property.area %} ‚Ä¢ Area: {{ property.area }}{% endif %}
      {% if property.rooms %} ‚Ä¢ Rooms: {{ property.rooms }}{% endif %}
    </p>

    <p>{{ property.description }}</p>

    <p><b>Contact:</b> {{ property.contact }}</p>

    {% if property.gmap_link %}
      <a class="btn btn-outline-secondary" href="{{ property.gmap_link }}" target="_blank">üìç View on Google Maps</a>
    {% endif %}
  </div>

  <div class="col-md-5">
    {% if user and user.id == property.owner_id %}
      <div class="card">
        <div class="card-body">
          <h5>Owner Actions</h5>
          <a class="btn btn-sm btn-warning me-2" href="{{ url_for('edit_property', pid=property.id) }}">Edit</a>
          <form class="d-inline" method="post" action="{{ url_for('delete_property', pid=property.id) }}" onsubmit="return confirm('Delete this property?');">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
