{% extends "base.html" %}
{% block content %}
<h3>Browse Properties</h3>

<form class="row g-2 mb-3" method="get">
  <div class="col-md-3"><input class="form-control" name="location" placeholder="Location" value="{{ request.args.get('location','') }}"></div>
  <div class="col-md-2">
    <select class="form-select" name="type">
      <option value="">Type</option>
      <option value="land"  {{ 'selected' if request.args.get('type')=='land'  else '' }}>Land</option>
      <option value="house" {{ 'selected' if request.args.get('type')=='house' else '' }}>House</option>
    </select>
  </div>
  <div class="col-md-2">
    <select class="form-select" name="mode">
      <option value="">Sale/Rent</option>
      <option value="sale" {{ 'selected' if request.args.get('mode')=='sale' else '' }}>Sale</option>
      <option value="rent" {{ 'selected' if request.args.get('mode')=='rent' else '' }}>Rent</option>
    </select>
  </div>
  <div class="col-md-2"><input class="form-control" type="number" step="0.01" name="min_price" placeholder="Min Price" value="{{ request.args.get('min_price','') }}"></div>
  <div class="col-md-2"><input class="form-control" type="number" step="0.01" name="max_price" placeholder="Max Price" value="{{ request.args.get('max_price','') }}"></div>
  <div class="col-md-2"><input class="form-control" type="number" step="0.01" name="min_rent" placeholder="Min Rent" value="{{ request.args.get('min_rent','') }}"></div>
  <div class="col-md-2"><input class="form-control" type="number" step="0.01" name="max_rent" placeholder="Max Rent" value="{{ request.args.get('max_rent','') }}"></div>
  <div class="col-md-2"><input class="form-control" type="number" step="0.01" name="min_area" placeholder="Min Area" value="{{ request.args.get('min_area','') }}"></div>
  <div class="col-md-2"><input class="form-control" type="number" step="0.01" name="max_area" placeholder="Max Area" value="{{ request.args.get('max_area','') }}"></div>
  <div class="col-md-2"><input class="form-control" type="number" name="rooms" placeholder="Rooms (house)" value="{{ request.args.get('rooms','') }}"></div>
  <div class="col-md-2"><button class="btn btn-primary w-100">Filter</button></div>
</form>

<div class="row">
  {% for p in properties %}
    <div class="col-md-4 mb-3">
      <div class="card h-100">
        {% if p.image_filename %}
        <img class="card-img-top" src="{{ url_for('uploaded_file', filename=p.image_filename) }}" alt="image">
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">{{ p.title }}</h5>
          <div class="small text-muted">{{ p.location }}</div>
          <a href="{{ url_for('property_detail', pid=p.id) }}" class="btn btn-sm btn-outline-primary mt-2">View</a>
        </div>
      </div>
    </div>
  {% else %}
    <p>No results found.</p>
  {% endfor %}
</div>
{% endblock %}
